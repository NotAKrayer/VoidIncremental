greekTables = {
	"greeklatin": {
		"20only": [ "mД“deno", "mono", "di", "tri", "tetra", "penta", "hexa", "hepta", "octa", "ennea" ],
		"20": [ "", "hena", "di", "tri", "tetra", "penta", "hexa", "hepta", "octa", "ennea",
		    "deca", "hendeca", "dЕЌdeca", "trideca", "tetradeca", "pentadeca", "hexadeca", "heptadeca", "octadeca", "enneadeca" ],
		"20myria": [ "", "hena", "dis", "tris", "tetra", "penta", "hexa", "hepta", "octa", "ennea",
			"deca", "hendeca", "dЕЌdeca", "trideca", "tetradeca", "pentadeca", "hexadeca", "heptadeca", "octadeca", "enneadeca" ],
		"tenstrue":  [ "", "", "icosa", "triaconta", "tessaraconta", "pentД“conta", "hexД“conta", "hebdomД“conta", "ogdoД“conta", "enenД“conta"],
		"tensfalse": [ "", "", "icosi", "triaconta", "tetraconta", "pentaconta", "hexaconta", "heptaconta", "octaconta", "enneaconta"],
		"hundredstrue":  [ "", "hecaton", "diДЃcosi", "triДЃcosi", "tetracosi", "pentacosi", "hexacosi", "heptacosi", "octacosi", "enacosi"],
		"hundredsfalse": [ "", "hecaton", "diДЃcosi", "triДЃcosi", "tetracosi", "pentacosi", "hexacosi", "heptacosi", "octacosi", "enneacosi"],
		"thousands": [ "", "chД«lia", "dischД«lia", "trischД«lia", "tetrachД«lia", "pentachД«lia", "hexachД«lia", "heptachД«lia", "octachД«lia", "enneachД«lia"],
		"myria": "mИіria",
		"siprefix": [ "", "chД«lia", "mega", "giga", "tera", "peta", "exa", "zetta", "yotta", "ronna", "quetta", "vendeka", "udeka" ]
	},
	
	"greek": {
		"20only": [ "ОјО·ОґОµОЅОї", "ОјОїОЅОї", "ОґО№", "П„ПЃО№", "П„ОµП„ПЃО±", "ПЂОµОЅП„О±", "бј‘ОѕО±", "бј‘ПЂП„О±", "ОїОєП„О±", "ОµОЅОЅОµО±" ],
		"20": [ "", "бј‘ОЅО±", "ОґО№", "П„ПЃО№", "П„ОµП„ПЃО±", "ПЂОµОЅП„О±", "бј‘ОѕО±", "бј‘ПЂП„О±", "ОїОєП„О±", "ОµОЅОЅОµО±",
		    "ОґОµОєО±", "бј‘ОЅОґОµОєО±", "ОґП‰ОґОµОєО±", "П„ПЃО№ОґОµОєО±", "П„ОµП„ПЃО±ОґОµОєО±", "ПЂОµОЅП„О±ОґОµОєО±", "бј‘ОѕО±ОґОµОєО±", "бј‘ПЂП„О±ОґОµОєО±", "ОїОєП„О±ОґОµОєО±", "ОµОЅОЅОµО±ОґОµОєО±" ],
		"20myria": [ "", "бј‘ОЅО±", "ОґО№Пѓ", "П„ПЃО№Пѓ", "П„ОµП„ПЃО±", "ПЂОµОЅП„О±", "бј‘ОѕО±", "бј‘ПЂП„О±", "ОїОєП„О±", "ОµОЅОЅОµО±",
		    "ОґОµОєО±", "бј‘ОЅОґОµОєО±", "ОґП‰ОґОµОєО±", "П„ПЃО№ОґОµОєО±", "П„ОµП„ПЃО±ОґОµОєО±", "ПЂОµОЅП„О±ОґОµОєО±", "бј‘ОѕО±ОґОµОєО±", "бј‘ПЂП„О±ОґОµОєО±", "ОїОєП„О±ОґОµОєО±", "ОµОЅОЅОµО±ОґОµОєО±" ],
		"tenstrue":  [ "", "", "ОµО№ОєОїПѓО±", "П„ПЃО№О±ОєОїОЅП„О±", "П„ОµПѓПѓО±ПЃО±ОєОїОЅП„О±", "ПЂОµОЅП„О·ОєОїОЅП„О±", "ОµОѕО·ОєОїОЅП„О±", "бј‘ОІОґОїОјО·ОєОїОЅП„О±", "ОїОіОґОїО·ОєОїОЅП„О±", "ОµОЅОµОЅО·ОєОїОЅП„О±"],
		"tensfalse": [ "", "", "ОµО№ОєОїПѓО№", "П„ПЃО№О±ОєОїОЅП„О±", "П„ОµП„ПЃО±ОєОїОЅП„О±", "ПЂОµОЅП„О±ОєОїОЅП„О±", "ОµОѕО±ОєОїОЅП„О±", "бј‘ПЂП„О±ОєОїОЅП„О±", "ОїОєП„О±ОєОїОЅП„О±", "ОµОЅОЅОµО±ОєОїОЅП„О±"],
		"hundredstrue":  [ "", "бј‘ОєО±П„ОїОЅ", "ОґО№бѕ±ОєОїПѓО№Оџ", "П„ПЃО№бѕ±ОєОїПѓО№Оџ", "П„ОµП„ПЃО±ОєОїПѓО№Оџ", "ПЂОµОЅП„О±ОєОїПѓО№Оџ", "бј‘ОѕО±ОєОїПѓО№Оџ", "бј‘ПЂП„О±ОєОїПѓО№Оџ", "ОїОєП„О±ОєОїПѓО№Оџ", "ОµОЅО±ОєОїПѓО№Оџ"],
		"hundredsfalse": [ "", "бј‘ОєО±П„ОїОЅ", "ОґО№бѕ±ОєОїПѓО№Оџ", "П„ПЃО№бѕ±ОєОїПѓО№Оџ", "П„ОµП„ПЃО±ОєОїПѓО№Оџ", "ПЂОµОЅП„О±ОєОїПѓО№Оџ", "бј‘ОѕО±ОєОїПѓО№Оџ", "бј‘ПЂП„О±ОєОїПѓО№Оџ", "ОїОєП„О±ОєОїПѓО№Оџ", "ОµОЅОЅОµО±ОєОїПѓО№Оџ"],
		"thousands": [ "", "П‡бї‘О»О№Оџ", "ОґО№ПѓП‡бї‘О»О№Оџ", "П„ПЃО№ПѓП‡бї‘О»О№Оџ", "П„ОµП„ПЃО±П‡бї‘О»О№Оџ", "ПЂОµОЅП„О±П‡бї‘О»О№Оџ", "бј‘ОѕО±П‡бї‘О»О№Оџ", "бј‘ПЂП„О±П‡бї‘О»О№Оџ", "ОїОєП„О±П‡бї‘О»О№Оџ", "ОµОЅОЅОµО±П‡бї‘О»О№Оџ"],
		"myria": "ОјбїЎПЃО№О±",
		"siprefix": [ "", "П‡бї‘О»О№Оџ", "ОјОµОіО±", "ОіО№ОіО±", "П„ОµПЃО±", "ПЂОµП„О±", "ОµОѕО±", "О¶ОµП„П„О±", "О№ОїП„П„О±", "ПЃОїОЅОЅО±", "ОєОїП…ОµП„П„О±", "ПќОµОЅОґОµОєО±", "ОїП…ОґОµОєО±" ]
	}
}

latinTables = {
	"latinmacron": {
		"unitonly": [ "nД«li", "Е«ni", "bi", "tri", "quadri", "quД«nti", "sexa", "septi", "octЕЌ", "nona"],
		"unitfinal": [ "", "Е«ni", "duo", "tri", "quadri", "quД«nti", "sexa", "septi", "octЕЌ", "nona",
			"deca", "Е«ndeca", "duodeca", "trД“deca", "quattuordeca", "quД«ndeca", "sД“deca", "septendeca", "octЕЌdeca", "novendeca" ],
		"unitmult": [ "", "", "du", "trД“", "quadri", "quД«n", "sexa", "septin", "octЕЌ", "nЕЌn" ],
		"tens": ["", "deca", "vД«gintД«", "trД«gintДЃ", "quadrДЃgintДЃ", "quД«nquДЃgintДЃ", "sexДЃgintДЃ", "septuДЃgintДЃ", "octЕЌgintДЃ", "nЕЌnДЃgintДЃ"],
		"hundreds": ["", "centД«", "ducentД«", "trecentД«", "quadringentД«", "quД«ngentД«", "sescentД«", "septingentД«", "octingentД«", "nЕЌngentД«"],
		"thousands": ["", "mД«lli", "mД«lli", "bД«lli", "trД«lli", "quadrД«lli", "quД«ntД«lli", "sextД«lli", "septД«lli", "octД«lli", "nЕЌnД«lli",
		    "decД«lli", "Е«ndecД«lli", "duodecД«lli", "trД“decД«lli", "quattuordecД«lli", "quД«ndecД«lli", "sД“decД«lli", "septendecД«lli", "octЕЌdecД«lli", "novendecД«lli" ],
		"ard": "ardi",
		"on": "ЕЌ"
	}
}

function numberToLatin(strnumber, params, table) {
	strnumber = strnumber.replaceAll(/^0*/g, ""); // trims leading zeros
	const separator = ".";
	var number = [];
	for(strnum of strnumber)
		number.push(Number(strnum));
	
	number.reverse();
	
	function hundreds(
		number, // three digit number
		ismult, // is used as a multiple of a thousand
		islone // total number less than 1000
	) {
		var result = []; // resulting array of strings, representing the thousands numeral
		number = number.concat([0,0,0]).slice(0,3) // pad with ending zeros
		
		if(number[2] > 0) // hundreds' place
			result.push(table["hundreds"][number[2]]);
		
		if(number[1] >= 2) { // tens' place
			result.push(table["tens"][number[1]]);
			if(number[0] >= 1) {
				if(ismult)
					result.push(table["unitmult"][number[0]]);
				else
					result.push(table["unitfinal"][number[0]]);
			}
		}
		
		if(number[1] <= 1) { // units' place
			if(number[1] != 0 || number[0] != 0) { // only if the end isn't 00
				if(islone && number[1] + number[2] == 0)
					result.push(table["unitonly"][number[0]]);
				else {
					if(ismult && number[1] == 0) {
						if(number[0] > 1) // no empty string [""]
							result.push(table["unitmult"][10*number[1] + number[0]]);
					}
					else
						result.push(table["unitfinal"][10*number[1] + number[0]]);
				}
			}
			else if(islone && number[2] == 0)
				result.push(table["unitonly"][0]);
		}
		return result
	}
	
	function thousandsExponent(n, useard) {
		if(n < 2) // 1 and 1000 ("", "milli")
			return table["thousands"][n];
		else { // в‰Ґ 1000
			if(useard)
				return table["thousands"][Math.floor(n/2)+1] + ((n % 2) ? table["ard"] : table["on"]);
			else
				return table["thousands"][n] + table["on"];
		}
	}
	
	result = [];
	
	var islone = number.length <= 3;
	result = hundreds(number.slice(0,3), false, islone);
	number = number.slice(3);
	
	for(var i = 0; number.length > 0; i++) {
		if(number[0] + number[1] + number[2] != 0)
			result = hundreds(number.slice(0,3), true, false).concat(thousandsExponent(i+1, params.la_useard), result);
		number = number.slice(3);
	}
	
	result = result.join(separator)
		.replaceAll(/[aeiouДЃД“Д«ЕЌЕ«]\.[aДЃ]/g, separator + "ДЃ")
		.replaceAll(/[aeiouДЃД“Д«ЕЌЕ«]\.[eД“]/g, separator + "Д“")
		.replaceAll(/[aeiouДЃД“Д«ЕЌЕ«]\.[iД«]/g, separator + "Д«")
		.replaceAll(/[aeiouДЃД“Д«ЕЌЕ«]\.[oЕЌ]/g, separator + "ЕЌ")
		.replaceAll(/[aeiouДЃД“Д«ЕЌЕ«]\.[uЕ«]/g, separator + "Е«")
		.replaceAll(/n\.(?=[mbp])/g, "m" + separator)
	;
	
	if(params.___showsep)
		result = result.replaceAll(separator, params.___separator+"<wbr/>");
	else
		result = result.replaceAll(separator, "<wbr/>");
	
	if(!params.la_macra)
		result = result
			.replaceAll("ДЃ", "a")
			.replaceAll("Д“", "e")
			.replaceAll("Д«", "i")
			.replaceAll("ЕЌ", "o")
			.replaceAll("Е«", "u")
		;
	
	return result;
}

function numberToGreek(strnumber, params, table) {
	strnumber = strnumber.replaceAll(/^0*/g, ""); // trims leading zeros
	const separator = ".";
	
	var number = [];
	for(strnum of strnumber)
		number.push(Number(strnum));
	
	number.reverse();
	
	function thousands(
		number, // four digit number
		ismyria, // is used before all the myriae
		islone // total number less than 10000
	) {
		var result = []; // resulting array of strings, representing the thousands numeral
		number = number.concat([0,0,0,0]).slice(0,4) // pad with ending zeros
		
		if(number[3] > 0) // thousands' place
			result.push(table["thousands"][number[3]]);
		
		if(number[2] > 0) // hundreds' place
			if(params.gr_falseconta)
				result.push(table["hundredsfalse"][number[2]]);
			else
				result.push(table["hundredstrue"][number[2]]);
		
		if(number[1] > 1) { // tens' place
			if(params.gr_falseconta)
				result.push(table["tensfalse"][number[1]]);
			else {
				if(number[1] == 2 && number[0] != 0) // icosi-icosa distinction
					result.push(table["tensfalse"][number[1]]);
				else
					result.push(table["tenstrue"][number[1]]);
			}
			
			if(number[0] >= 1) {
				if(ismyria)
					result.push(table["20myria"][number[0]]);
				else
					result.push(table["20"][number[0]]);
			}
		}
		
		if(number[1] <= 1) { // units' place
			if(number[1] != 0 || number[0] != 0) { // only if the end isn't 00
				if(ismyria) {
					if(10*number[1] + number[0] >= 2)
						result.push(table["20myria"][10*number[1] + number[0]]);
				}
				else if(islone && number[1] + number[2] + number[3] == 0)
					result.push(table["20only"][number[0]]);
				else
					result.push(table["20"][10*number[1] + number[0]]);
			}
			else if(islone && number[2] == 0)
				result.push(table["20only"][0]);
		}
		
		return result;
	}
	
	var result = [];
	if(!params.gr_usesi) {
		var islone = number.length <= 4;
		result = thousands(number, false, islone);
		number = number.slice(4);
		
		while(number.length > 0) {
			result = thousands(number, true, false).concat(table["myria"], result);
			number = number.slice(4);
		}
	}
	else {
		var islone = number.length <= 3;
		result = thousands(number.slice(0,3), false, islone);
		number = number.slice(3);
		
		for(var i = 0; number.length > 0; i++) {
			if(number[0] + number[1] + number[2] != 0)
				result = thousands(number.slice(0,3), true, false).concat(table["siprefix"][i+1], result);
			number = number.slice(3);
		}
	}
	
	result = result.join(separator)
		.replaceAll(/[aeiouО±ОµО№ОїОџП…]\.(?=[aeiouО±ОµО№ОїОџП…])/g, separator)
		.replaceAll("Оџ", "ОїО№")
		/*.replaceAll("Ої"+separator+"О№", "Ої"+separator+"ПЉ")
		.replaceAll("Оµ"+separator+"О№", "Оµ"+separator+"ПЉ")
		.replaceAll("О±"+separator+"О№", "О±"+separator+"ПЉ")*/
	;
	
	if(!params.gr_macra)
		result = result
			.replaceAll("oД“", "oГ«")
			.replaceAll("ДЃ", "a")
			.replaceAll("Д“", "e")
			.replaceAll("Д«", "i")
			.replaceAll("ЕЌ", "o")
			.replaceAll("Е«", "u")
			.replaceAll("Иі", "y")
			.replaceAll("бѕ±", "О±")
			.replaceAll("бї‘", "О№")
			.replaceAll("бїЎ", "П…")
		;
	
	if(params.___showsep)
		result = result.replaceAll(separator, params.___separator+"<wbr/>");
	else
		result = result.replaceAll(separator, "<wbr/>");
	
	return result;
}

function main() {
	var number = document.getElementById("number").value;
	
	var params = {
		"___showsep": document.getElementById("___showsep").checked,
		"___separator": document.getElementById("___separator").value.replaceAll("<", "&lt;").replaceAll(">", "&gt;"),
		
		"gr_usesi": document.getElementById("gr_usesi").checked,
		"gr_usegr": document.getElementById("gr_usegr").checked,
		"gr_macra": document.getElementById("gr_macra").checked,
		"gr_falseconta": document.getElementById("gr_falseconta").checked,
		
		"la_macra": document.getElementById("la_macra").checked,
		"la_useard": document.getElementById("la_useard").checked
	}
	
	if(params.___showsep) document.getElementById("span____separator").style.display = "unset";
	else                  document.getElementById("span____separator").style.display = "none";
	
	number = number.replaceAll(/[-\,\;\/]/g, " ").split(" ");
	total_gr = [];
	gr_table = params.gr_usegr ? greekTables["greek"] : greekTables["greeklatin"];
	la_table = latinTables["latinmacron"];
	
	total_la = [];
	
	for(num of number) {
		total_gr.push(numberToGreek(num, params, gr_table));
		total_la.push(numberToLatin(num, params, latinTables.latinmacron));
	}
	
	// greek final touches
	total_gr = total_gr
		.join("-")
		.replaceAll(/^Ої/g, "бЅЂ")
		.replaceAll(/^Оµ/g, "бјђ")
		.replaceAll(/^бјђО№/g, "Оµбј°")
		.replaceAll(/^ПЃ/g, "бїҐ")
		.replaceAll("undefined", "<span class=\"lred\">[undefined]</span>")
	;
	total_gr = total_gr[0].toUpperCase() + total_gr.slice(1);
	document.getElementById("outputgreek").innerHTML = total_gr + "-";
	
	// latin final touches
	total_la = total_la
		.join("-")
		.replaceAll("undefined", "<span class=\"lred\">[undefined]</span>")
	;
	total_la = total_la[0].toUpperCase() + total_la.slice(1);
	document.getElementById("outputlatin").innerHTML = total_la + "-";
}